1. 教师和试卷应该是一对多的关系，一个老师应该可以发布多个试卷，然后试卷科目不能作为主键，主键应该是试卷 id。教师也不要科目，外键放在多的一端。
2. 教师和学生应该是多对多，需要建一个中间表。中间表需要教师id 和学生 id
3. 教师和学生里面需要添加一个键`role`，所以需要单独建一个角色表，和教师学生为一对多的关系。
4. 学生表里面多人同屏次数、无脸次数、有无中途换人、切屏次数都不要，这个只是我们在每一次考试的时候用于判断的东西，和学生无关。如果数据库里面添加了这几个信息就会导致我们每次在考完之后去修改这几个值，但是每次考完都会覆盖之前的，所以意义不大。
5. 学生和试卷也是多对多的关系，所以学生表里面的科目、教师姓名和分数不是很合理，因为一个学生不可能只有一个科目，一个老师，一个分数，这个不能放在这里。科目用试卷 id 替代，分数也放在试卷里面。
6. 试卷表里面应该包含试卷 id，发布老师，考试时间，答题人（这个我没想明白，学生的分数是不是用试卷来展示的），还有一个就是学生考试回答的内容存在哪里，学生的答案肯定是需要放在数据库的，这个老师是随时可以查的，我这边也需要对客观题进行评分。



图片的表单独建，减少数据库的查询。其他地方用到数据库不用查照片



生成 uuid：**UUID.randomUUID().toString()**

### 数据库db_anti_cheating

#### 学生表 tbl_student

id 主键

name

password

stuId

school

email



#### 教师表 tbl_teacher

id 主键

name

password 

school

email



#### 题目表

id 主键





#### 试卷表



数据库 SQL

```sql
show databases ;
use db_anti_cheating;



create database db_anti_cheating charset =utf8;

use db_anti_cheating;

create table tbl_role(
    id int primary key ,
    role varchar(6)
);

insert into tbl_role(id, role) values (1, "教师"),(2,"学生");

create table tbl_user(
    id varchar(36) primary key,
    name varchar(10) not null ,
    password varchar(32) not null ,
    number varchar(32) not null ,
    school varchar(32),
    email varchar(32) unique not null ,
    role int default 2 not null ,
    status tinyint default 0,
    foreign key(role) references tbl_role(id)
);

create table tbl_relation(
    aid varchar(36),
    foreign key (aid) references tbl_user(id),
    bid varchar(36),
    foreign key (bid) references tbl_user(id)
);

create table tbl_all_question(
    id integer primary key auto_increment,
    type integer not null
);

create table tbl_answer_question(
    id integer primary key ,
    foreign key (id) references tbl_all_question(id),
    title varchar(500) not null ,
    score float
);

create table tbl_choice_question(
    id integer primary key ,
    foreign key(id) references tbl_all_question(id),
    title varchar(255) not null ,
    selectA varchar(255),
    selectB varchar(255),
    selectC varchar(255),
    selectD varchar(255),
    score float,
    correctChoice character not null
);

create table tbl_examination_paper(
    id integer primary key auto_increment,
    teacherId varchar(36) not null,
    foreign key(teacherId) references tbl_user(id),
    permitTime integer,
    changeBoundaryTime integer,
    startTime datetime,
    endTime datetime,
    course varchar(10)
);


create table tbl_paper_question(
    question_id integer,
    foreign key(question_id) references tbl_all_question(id),
    paper_id integer,
    foreign key(paper_id) references tbl_examination_paper(id)
);

create table tbl_student_paper(
    student_id varchar(36),
    foreign key (student_id) references tbl_user(id),
    paper_id integer,
    foreign key (paper_id) references tbl_examination_paper(id),
    score float default 0,
    same_time integer default 0,
    quit_time integer default 0,
    side_time integer default 0,
    change_time integer default 0,
    change_people boolean default false
);

create table tbl_user_image(
    sid varchar(36) primary key ,
    foreign key (sid) references tbl_user(id),
    image varchar(256)
);

show tables;
```

