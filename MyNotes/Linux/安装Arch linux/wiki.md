# Archlinux安装（详细图文教程）

> 操作环境：win10+VMware Workstation Pro创建的虚拟环境
>
> 目的安装环境：archlinux虚拟机（已经安装了一个ubuntu的物理机，所以下面所有操作都在虚拟机上进行）

#### 下载

首先，我们需要从官网上下载我们安装所需要的资源[下载地址](https://www.archlinux.org/download/)。往下拉，找到__china__那一栏，选择**163.com**或者你想选的那一个，点击下载。

![](.\Source\0.png)

#### 配置安装环境

- **虚拟机**
  1. 创建虚拟环境
- **物理机**
  1. 刻录镜像







#### 安装Archlinux

1. 首先我们使用`ls /sys/firmware/efi/efivars`命令来检查是否使用了UEFI启动,如果输出一大串东西就说明是UEFI启动。因为虚拟机里我没法复制，所以就不演示了。

2. 连接网络

   - 无线连接

     ```shell
     root@archiso ~# wifi-muen
     ```

     真机中使用这个连接后就跳出来一个框，让我们选择网络，然后输入密码。

     连接后可以使用`ping`来测试一下，例如，`ping www.baidu.com`。

   - 有线连接

3. 设置时间

   ```shell
   root@archiso ~# timedatectl set-ntp true
   ```

4. 更换更新源

   因为我们是在国内，所以访问国外的网站网速肯定比较慢。所以我们就需要更换国内的镜像源。用vim打开`/etc/pacman.d/mirrorlist`文件

   ```shell
   root@archiso ~# vim /etc/pacman.d/mirrorlist
   ```

   进入之后，我们可以看到有不同国家的更新源地址。但是在arch中，默认以第一个更新源地址为默认地址，所以需要将中国的更新源地址放到第一位。我们将光标移到__china__那一行（也可以通过用`/China`并按下`回车`查找所有的china更新源,`n`是查找下一个,`N`是查找上一个），选择一个你认为比较好的更新源，然后用按`2dd`剪切,把光标移到第一个更新源前面,按下`p`粘贴。操作完成后如下图：

   ![](.\Source\14.png)

   退出时，按__ESC__键，然后输入`:wq`保存退出。

5. 分区

   1. 在终端中用`lsblk`查看磁盘分区情况

6. 格式化分区

   1. 用`parted /dev/sda`格式化磁盘，这里的`sda`是根据上面命令查看的分区情况来选择进行格式化分区名称。
   2. 完成上面指令后我们就进入了一个`parted`命令，接下来我们执行`mktable`建立分区表。执行完上面命令后会提示你选择哪种形式。这里我们输入`gpt`模式回车执行。
   3. 输入`quit`退出

7. 挂载分区

   1. 执行`cfdisk /dev/sda`进入开始分区，下方有个方框在`NEW`上，我们可以通过左右键移动。

   2. 在`NEW`上按回车，然后输入你想分配`根目录`的大小，这里我是输入的`10G`按回车。同上我们再分配`10G`作为`home`目录。

   3. 再次执行上述操作分配`300M`给`EFI`，但是在执行完这操作后，将下面光标移到`Type`上按回车。进入一个选择菜单。通过上下键移动，将光标移到`EFI System`按回车。这时你可以在刚分配空间行的最右端看到`大小`和`类型`。

   4. 然后将剩余的空间分配给`swqp`空间。同上在分配完之后将光标移到`Type`上回车，选择`Linux swap`。分配后的空间如图

      ![](D:\MyNotes\Linux\安装Arch linux\Source\15.png)

   5. 最后将光标移到`Write`按回车执行操作，然后确定。

      1. 确定之后还是那个界面，光标移到`Quit`退出。

   6. 安装软件