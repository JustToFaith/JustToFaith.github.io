# 防作弊系统

### Web 服务端

开发语言：Java

开发工具：IDEA

数据库：Mysql、Redis

依赖管理：Maven

框架：Mybatis、Spring、SpringMVC

版本控制：git



### 安卓：

##### 功能：

打开手机应用，当网页端进入考试页面时，网页端给个弹框（请在手机页面确认开始考试）

当手机端点击确认考试时，网页端和手机端同步进行计时，并开始监听屏幕和应用。

手机切换到后台，网页前端页面进行弹框提示，服务器记录一次。

手机使用分屏，网页前端页面进行弹窗提示，服务器记录一次

当服务器收到 x 次违规操作后结束考试。



##### 判断应用是否在后台：[博客链接](https://blog.csdn.net/bzlj2912009596/article/details/80073396)

```java
/**
     * 判断应用是否是在后台
     */
    public static boolean isBackground(Context context) {
        ActivityManager activityManager = (ActivityManager) context
                .getSystemService(Context.ACTIVITY_SERVICE);
        KeyguardManager keyguardManager = (KeyguardManager) context.getSystemService(KEYGUARD_SERVICE);
 
        List<ActivityManager.RunningAppProcessInfo> appProcesses = activityManager
                .getRunningAppProcesses();
        for (ActivityManager.RunningAppProcessInfo appProcess : appProcesses) {
            if (TextUtils.equals(appProcess.processName, context.getPackageName())) {
                boolean isBackground = (appProcess.importance != ActivityManager.RunningAppProcessInfo.IMPORTANCE_FOREGROUND && appProcess.importance != ActivityManager.RunningAppProcessInfo.IMPORTANCE_VISIBLE);
                boolean isLockedState = keyguardManager.inKeyguardRestrictedInputMode();
                return isBackground || isLockedState;
            }
        }
        return false;
    }
```

##### 安卓监听是否分屏：[博客链接](https://blog.csdn.net/wangkaishou/article/details/89892534)

```java
@Override
public void onMultiWindowModeChanged(boolean isInMultiWindowMode) {
   super.onMultiWindowModeChanged(isInMultiWindowMode);
   Log.i(LOG_TAG,"onMultiWindowModeChanged isInMultiWindowsMode:"+isInMultiWindowMode);
}

```



#### 版本控制说明

都在 dev 分支上做开发，当 dev 分支完成一个完整模块时再把 master 合并上来。

`git checkout -b dev origin/dev`把远程的 dev 分支创建到本地。

`git switch dev`切换到dev 分支

`git push origin dev`将 dev 分支推到 github 上

`git pull origin dev`下拉 dev 分支到本地。



