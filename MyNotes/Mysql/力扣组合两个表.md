## 数据库组合两个表(MySQ)

> 这个是一个数据库的题，来源于力扣

#### 题目：

表1: Person

```
+-------------+---------+
| 列名         | 类型     |
+-------------+---------+
| PersonId    | int     |
| FirstName   | varchar |
| LastName    | varchar |
+-------------+---------+
```

PersonId 是上表主键

表2: Address

```
+-------------+---------+
| 列名         | 类型    |
+-------------+---------+
| AddressId   | int     |
| PersonId    | int     |
| City        | varchar |
| State       | varchar |
+-------------+---------+
```

AddressId 是上表主键


编写一个 SQL 查询，满足条件：无论 person 是否有地址信息，都需要基于上述两表提供 person 的以下信息：

```
FirstName, LastName, City, State
```



#### 题解：

这题考的是连接查询中的外连接，题目中规定了无论`person`是否有地址信息，都要其地址信息。这是解题的关键，这提醒我们需要使用连接查询中的`letf join`查询。在力扣中提交代码的时候，力扣输入的数据中有些是没有地址信息的，如果我们用内连接是无法达到题目要求，也就提交不成功。

关于连接查询可以参考这篇博客[连接查询]。

#### SQL代码

```sql
select p.FirstName, p.LastName, a.City, a.State 
from Person p
left join  Address a
on  
Person.PersonId=Address.PersonId;
```

这段代码的执行时间是169ms，也是大多数人的写法。但是我在评论区看到一位大佬写的sql语句执行时间只有159ms，击败了99.22%的用户。他的代码如下

```sql
select A.FirstName, A.LastName, B.City, B.State
from Person A
left join (select distinct PersonId, City, State from Address) B
on A.PersonId=B.PersonId;
```

至于他是将`Address`中的`AddressId`去掉减少的时间，还是用`distinct`去重而减少的时间这个我还真没看懂。

