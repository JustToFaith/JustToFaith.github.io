# java内部类

> 如果一个事物的内部包含另一个事物，那么这就是一个类包含另一个类



### 分类

1. 成员内部类
2. 局部内部类（包含匿名内部类）



### 成员内部类

格式：

```java
修饰符 class 外部类名称{
	修饰符 class 内部类名称{
    ....
  }
  ....
}
```

注意：内用外，随意访问；外用类，需要内部对象。

#### 使用方式：

1. 间接使用：在外部类的方法当中使用内部类；然后`main`只是调用外部类的方法。
2. 直接方式：`外部类名称.内部类名称 对象名 = new 外部类名称().new 内部类名称();`

如果出现重名现象，访问外部类成员变量的格式：`外部类名称.this.外部类成员变量名`



### 局部内部类

> 如果一个类是定义在一个方法的内部，那么这就是一个局部内部类

格式：

```java
修饰符 class 外部类名称{
  修饰符 返回值类型 外部类方法名称(参数列表){
    class 内部类名称{ // 这里没有修饰符
      ....
    }
  }
  ....
}
```

注意：局部内部类如果希望访问所在方法的局部变量，那么必须保证局部变量是有效`final`的。

原因：

1. `new`出来的数据是在堆内存中
2. 局部变量是跟着方法走，在栈内存中
3. 方法运行结束后，立刻出栈，局部变量就会消失。
4. 但是`new`出来的对象会在堆中持续存在，知道垃圾回收消失。

#### 匿名内部类

> 如果接口的实现类（或者是父类的子类）只需要使用唯一一次，
>
> 那么这种情况下就可以省略该类的定义，而改为使用**匿名内部类**。

格式：

```java
接口名称 对象名 = new 接口名称(){
  // 覆盖重写所有抽象方法
};
```

对格式`new 接口名称(){...}`进行解析：

1. `new`代表创建对象的动作
2. 接口名称就是匿名内部类需要实现的接口
3. `{...}`这是匿名内部类的内容

注意：

1. 匿名内部类在**创建对象**的时候，只能使用唯一一次。

   如果希望多次创建对象，而且类的内容完全一样的话，就必须使用单独定义的实现类。

2. **匿名对象**，在**调用方法**的时候只能调用唯一一次。

   如果希望同一个对象，调用多次方法，就必须给对象取个名字。

3. 匿名内部类是省略了**实现类/子类名称**，但是匿名对象省略了**对象名称**

*匿名内部类和匿名对象不是同一个东西*

